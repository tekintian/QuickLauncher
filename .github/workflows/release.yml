# Description: GitHub Actions workflow to build and release QuickLauncher for macOS
# Triggers on new version tags (v*), builds Intel and ARM64 versions,
# creates release assets (DMG, ZIP, SHA256), and publishes to GitHub Releases.
# Uses self-signed code signing, with optional developer certificate signing.
# Generates detailed release notes highlighting features, improvements, and installation instructions.
# author: tekintian@gmail.com   https://dev.tekin.cn
# date: 2025-12-20
# version: 2.0.0
# license: MIT
name: Release

on:
  push:
    # Trigger release workflow on new version tags
    tags:
      - 'v*'

permissions:
  contents: write

jobs:
  build:
    runs-on: macos-14
    strategy:
      fail-fast: false
      matrix:
        include:
          - config_name: Intel
            architecture: x86_64
            deployment_target: "10.13"
          - config_name: ARM64
            architecture: arm64
            deployment_target: "11.0"
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      with:
        submodules: recursive

    - name: Setup CI Environment
      run: |
        chmod +x scripts/ci-setup.sh
        ./scripts/ci-setup.sh

    - name: Install Dependencies
      run: |
        set -euo pipefail
        echo "ğŸ“¦ Installing dependencies..."
        # Install tools needed for release packaging
        if ! command -v xz &> /dev/null; then
          echo "ğŸº Installing xz..."
          brew install xz
        else
          echo "âœ… xz is already installed"
        fi

    - name: Build App
      run: |
        # Use proper destination that includes architecture
        if [[ "${{ matrix.architecture }}" == "x86_64" ]]; then
          DESTINATION="platform=macOS,arch=x86_64"
        else
          DESTINATION="platform=macOS,arch=arm64"
        fi
        
        xcodebuild clean build \
          -project QuickLauncher.xcodeproj \
          -scheme QuickLauncher \
          -configuration Release \
          -derivedDataPath DerivedData-${{ matrix.config_name }} \
          -destination "$DESTINATION" \
          MACOSX_DEPLOYMENT_TARGET="${{ matrix.deployment_target }}" \
          CODE_SIGN_IDENTITY="" \
          CODE_SIGNING_REQUIRED=NO \
          CODE_SIGNING_ALLOWED=NO

    - name: Create Artifacts
      run: |
        # Find and work directly with the built app (no copy to avoid du calculation issues)
        APP_PATH=$(find DerivedData-${{ matrix.config_name }} -name "QuickLauncher.app" -type d | head -1)
        if [ -z "$APP_PATH" ]; then
          echo "âŒ No app bundle found"
          exit 1
        fi
        
        echo "find app bundle at: $APP_PATH"

        # Step 3: Prepare CI-Artifacts directory (same as CI workflow)
        rm -rf CI-Artifacts
        mkdir -p CI-Artifacts

        echo "ğŸ§¹ Running library cleanup script..."
   
        if [ -f "./scripts/clean-libs.sh" ]; then
          chmod +x ./scripts/clean-libs.sh
          ./scripts/clean-libs.sh "$APP_PATH"
          echo "âœ… Library cleanup completed"
        else
          echo "âš ï¸ clean-libs.sh script not found"
        fi
        
        # Basic verification
        [ -f "$APP_PATH/Contents/MacOS/QuickLauncher" ] || exit 1
        [ -x "$APP_PATH/Contents/MacOS/QuickLauncher" ] || exit 1
        
        # Step 4: Package app bundle like CI workflow, but don't compress for release
        echo " moving $APP_PATH to CI-Artifacts/QuickLauncher.app "
        mv $APP_PATH CI-Artifacts/QuickLauncher.app
        
        # Verify deployment target in Info.plist
        INFO_PLIST="CI-Artifacts/QuickLauncher.app/Contents/Info.plist"
        if [ -f "$INFO_PLIST" ]; then
          echo "âœ… ${{ matrix.config_name }} Info.plist exists, updating deployment target..."
          /usr/libexec/PlistBuddy -c "Set :LSMinimumSystemVersion ${{ matrix.deployment_target }}" "$INFO_PLIST" 2>/dev/null || echo "âš ï¸ Could not update deployment target"
        fi
        
        echo "âœ… ${{ matrix.config_name }} build completed"
        
    - name: Upload Build Artifacts
      uses: actions/upload-artifact@v4
      with:
        name: ${{ matrix.config_name }}-build
        path: CI-Artifacts/
        retention-days: 1

  package-release:
    needs: build
    runs-on: macos-14
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
      
    - name: Download All Artifacts
      uses: actions/download-artifact@v4
      with:
        path: artifacts
        merge-multiple: true
        
    - name: Extract Build Artifacts
      run: |
        mkdir -p Release/Intel Release/ARM64
        
        # Check what artifacts were downloaded
        echo "ğŸ“‹ Downloaded artifacts structure:"
        find artifacts -type d -name "*build*" || echo "No build artifacts found"
        ls -la artifacts/ || echo "Empty artifacts directory"
        
        # Extract Intel build if exists
        if [ -d "artifacts/Intel-build" ]; then
          echo "ğŸ“¦ Extracting Intel build..."
          cp -R artifacts/Intel-build/* Release/Intel/
          # The app should be at Release/Intel/QuickLauncher.app
          if [ -f "Release/Intel/QuickLauncher.app/Contents/MacOS/QuickLauncher" ]; then
            echo "âœ… Intel app extracted successfully"
          else
            echo "âŒ Intel app extraction failed"
            find Release/Intel -name "*.app" -type d || echo "No .app found in Intel release"
            exit 1
          fi
        else
          echo "âŒ Intel build artifact not found"
          find artifacts -type d
          exit 1
        fi
        
        # Extract ARM64 build if exists  
        if [ -d "artifacts/ARM64-build" ]; then
          echo "ğŸ“¦ Extracting ARM64 build..."
          cp -R artifacts/ARM64-build/* Release/ARM64/
          # The app should be at Release/ARM64/QuickLauncher.app
          if [ -f "Release/ARM64/QuickLauncher.app/Contents/MacOS/QuickLauncher" ]; then
            echo "âœ… ARM64 app extracted successfully"
          else
            echo "âŒ ARM64 app extraction failed"
            find Release/ARM64 -name "*.app" -type d || echo "No .app found in ARM64 release"
            exit 1
          fi
        else
          echo "âŒ ARM64 build artifact not found"
          find artifacts -type d
          exit 1
        fi
        
        # Verify both architectures were built
        echo "ğŸ“‹ Verifying build artifacts:"
        for arch in Intel ARM64; do
          if [ -d "Release/$arch/QuickLauncher.app" ]; then
            echo "âœ… $arch app: $(du -sh Release/$arch/QuickLauncher.app | cut -f1)"
            [ -f "Release/$arch/QuickLauncher.app/Contents/MacOS/QuickLauncher" ] && echo "  âœ… Executable exists" || echo "  âŒ Executable missing"
            [ -d "Release/$arch/QuickLauncher.app/Contents/Frameworks" ] && echo "  âœ… Frameworks exists" || echo "  âŒ Frameworks missing"
            [ -d "Release/$arch/QuickLauncher.app/Contents/Resources" ] && echo "  âœ… Resources exists" || echo "  âŒ Resources missing"
          else
            echo "âŒ $arch app not found"
            exit 1
          fi
        done
        
    - name: Code Sign (Self-Signed)
      run: |
        # Apply ad-hoc signatures with proper sandbox support for both versions
        for arch in Intel ARM64; do
          echo "ğŸ” Signing $arch version..."
          
          # Ensure plugins have proper sandbox entitlements
          find "Release/$arch/QuickLauncher.app/Contents/PlugIns" -name "*.appex" -type d | while read plugin; do
            echo "  Configuring sandbox for plugin: $(basename "$plugin")"
            
            # Add required sandbox entitlements for Finder extension
            PLIST_PATH="$plugin/Contents/Info.plist"
            if [ -f "$PLIST_PATH" ]; then
              # Add sandbox entitlements for Finder sync extension
              /usr/libexec/PlistBuddy -c "Add :com.apple.security.app-sandbox bool true" "$PLIST_PATH" 2>/dev/null || echo "    Sandbox key already exists"
              /usr/libexec/PlistBuddy -c "Add :com.apple.security.files.user-selected.read-write bool true" "$PLIST_PATH" 2>/dev/null || echo "    File access key already exists"
              /usr/libexec/PlistBuddy -c "Add :com.apple.security.temporary-exception.mach-lookup.global-name array" "$PLIST_PATH" 2>/dev/null || echo "    Mach lookup array already exists"
              /usr/libexec/PlistBuddy -c "Add :com.apple.security.temporary-exception.mach-lookup.global-name:0 string com.apple.FinderSync" "$PLIST_PATH" 2>/dev/null || echo "    Finder sync entry already exists"
            fi
            
            echo "  Signing plugin: $(basename "$plugin")"
            codesign --force --sign "-" --options runtime --entitlements <(echo '<?xml version="1.0" encoding="UTF-8"?>
            <!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
            <plist version="1.0">
            <dict>
                <key>com.apple.security.app-sandbox</key>
                <true/>
                <key>com.apple.security.files.user-selected.read-write</key>
                <true/>
                <key>com.apple.security.temporary-exception.mach-lookup.global-name</key>
                <array>
                    <string>com.apple.FinderSync</string>
                </array>
            </dict>
            </plist>') "$plugin" || echo "  âš ï¸ Plugin signing failed"
          done
          
          # Sign frameworks
          find "Release/$arch/QuickLauncher.app/Contents/Frameworks" -name "*.framework" -type d | while read framework; do
            echo "  Signing framework: $(basename "$framework")"
            
            # Fix framework library ID for proper dylib loading
            FRAMEWORK_NAME=$(basename "$framework" .framework)
            FRAMEWORK_BINARY="$framework/$FRAMEWORK_NAME"
            if [ -f "$FRAMEWORK_BINARY" ]; then
              echo "    Fixing framework library ID for $FRAMEWORK_NAME"
              install_name_tool -id "@rpath/$FRAMEWORK_NAME.framework/Versions/A/$FRAMEWORK_NAME" "$FRAMEWORK_BINARY" 2>/dev/null || echo "    Library ID already correct"
            fi
            
            codesign --force --sign "-" --options runtime "$framework" || echo "  âš ï¸ Framework signing failed"
          done
          
          # Fix main app dependency paths
          echo "  Fixing main app dependency paths..."
          MAIN_BINARY="Release/$arch/QuickLauncher.app/Contents/MacOS/QuickLauncher"
          if [ -f "$MAIN_BINARY" ]; then
            # Fix dylib references to use proper framework paths
            install_name_tool -change "@rpath/QuickLauncher.debug.dylib" "@rpath/QuickLauncherCore.framework/Versions/A/QuickLauncherCore" "$MAIN_BINARY" 2>/dev/null || echo "    Dependencies already correct"
          fi
          
          # Sign main app
          echo "  Signing main app bundle..."
          codesign --force --deep --sign "-" --options runtime "Release/$arch/QuickLauncher.app" || echo "âš ï¸ Main app signing failed"
          codesign --verify --verbose "Release/$arch/QuickLauncher.app" || echo "âš ï¸ Signature verification failed (may be expected for ad-hoc)"
        done
        
    - name: Code Sign (Optional - Developer Certificate)
      if: env.APPLE_SIGNING_IDENTITY != ''
      run: |
        echo "ğŸ›ï¸ Applying developer certificate signature..."
        codesign --force --verify --verbose --sign "${{ secrets.APPLE_SIGNING_IDENTITY }}" Release/Intel/QuickLauncher.app
        codesign --force --verify --verbose --sign "${{ secrets.APPLE_SIGNING_IDENTITY }}" Release/ARM64/QuickLauncher.app
      env:
        APPLE_SIGNING_IDENTITY: ${{ secrets.APPLE_SIGNING_IDENTITY }}
        
    - name: Create DMG
      run: |
        # Create DMG installers for both architectures
        chmod +x scripts/create-simple-dmg.sh
        
        echo "ğŸ“¦ Creating Intel DMG installer..."
        ./scripts/create-simple-dmg.sh "Release/Intel/QuickLauncher.app" "QuickLauncher-Intel.dmg"
        
        echo "ğŸ“¦ Creating ARM64 DMG installer..."
        ./scripts/create-simple-dmg.sh "Release/ARM64/QuickLauncher.app" "QuickLauncher-ARM64.dmg"
        
    - name: Create ZIP
      run: |
        # Create ZIP archives for both architectures
        cd Release/Intel
        zip -r ../../QuickLauncher-Intel.zip QuickLauncher.app
        cd ../ARM64
        zip -r ../../QuickLauncher-ARM64.zip QuickLauncher.app
        cd ../..
        
    - name: Generate Checksum
      run: |
        # Generate SHA256 checksums for all release files
        shasum -a 256 QuickLauncher-Intel.dmg > QuickLauncher-Intel.dmg.sha256
        shasum -a 256 QuickLauncher-ARM64.dmg > QuickLauncher-ARM64.dmg.sha256
        shasum -a 256 QuickLauncher-Intel.zip > QuickLauncher-Intel.zip.sha256
        shasum -a 256 QuickLauncher-ARM64.zip > QuickLauncher-ARM64.zip.sha256
        
    - name: Generate Release Notes
      run: |
        cat > release_notes.md << 'EOF'
        # ğŸš€ QuickLauncher v1.0.0 - é¦–ä¸ªæ­£å¼ç‰ˆå‘å¸ƒï¼

        > **QuickLauncher æ˜¯ä¸€æ¬¾ä¸“ä¸º macOS è®¾è®¡çš„å¼ºå¤§ç”Ÿäº§åŠ›å·¥å…·ï¼Œè®©ä½ ä» Finder å³é”®èœå•ç›´æ¥å¯åŠ¨ç»ˆç«¯å’Œä»£ç ç¼–è¾‘å™¨ï¼Œå½»åº•å‘Šåˆ«æ‰‹åŠ¨å¯¼èˆªç›®å½•çš„ç¹çæ“ä½œã€‚**

        ## ğŸ¯ ä¸ºä»€ä¹ˆé€‰æ‹© QuickLauncherï¼Ÿ

        **åŸºäº OpenInTerminal é¡¹ç›®å…¨é¢é‡æ„ï¼Œå¸¦æ¥é©å‘½æ€§æ”¹è¿›ï¼š**
        - ğŸš€ **ä½“ç§¯ç¼©å° 30%**ï¼šä» 32MB ä¼˜åŒ–è‡³ 22MBï¼Œä¸‹è½½æ›´å¿«ï¼Œå ç”¨æ›´å°‘ç©ºé—´
        - ğŸ§  **å†…å­˜ç®¡ç†ä¼˜åŒ–**ï¼šæ˜¾è‘—é™ä½èµ„æºå ç”¨ï¼Œæå‡ç³»ç»Ÿå“åº”é€Ÿåº¦
        - âš¡ **æ„å»ºé€Ÿåº¦æå‡ 50-70%**ï¼šæœ¬åœ°ä¾èµ–æ¶æ„ï¼Œå‘Šåˆ«ç½‘ç»œç­‰å¾…
        - ğŸ—ï¸ **ç°ä»£åŒ–æ¶æ„**ï¼šç»Ÿä¸€å¯åŠ¨ç®¡ç†ï¼Œå‘Šåˆ«è¾…åŠ©åº”ç”¨

        ## âœ¨ æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§

        ### ğŸ–±ï¸ **æ— ç¼ Finder é›†æˆ**
        - å³é”®èœå•ç›´æ¥è®¿é—®ï¼Œè‡ªå®šä¹‰åº”ç”¨å›¾æ ‡æ˜¾ç¤º
        - æ™ºèƒ½å·å®—ç›‘æ§ï¼ŒåŠ¨æ€æ›´æ–°å¯ç”¨åº”ç”¨
        - å·¥å…·æ é›†æˆé€‰é¡¹ï¼Œå¿«é€Ÿè®¿é—®å¸¸ç”¨åŠŸèƒ½

        ### ğŸ“± **35+ åº”ç”¨ç¨‹åºæ”¯æŒ**
        
        **ğŸ–¥ï¸ ç»ˆç«¯åº”ç”¨ (10 æ¬¾)**
        - Terminal, iTerm, Hyper, Alacritty, kitty, Warp, WezTerm, Tabby, Ghostty
        
        **âœï¸ ç¼–è¾‘å™¨åº”ç”¨ (25+ æ¬¾)**
        - **ä¸»æµç¼–è¾‘å™¨**: VS Code, Sublime Text, Atom, VSCodium, BBEdit, TextMate
        - **ä¸“ä¸š IDE**: å®Œæ•´ JetBrains å¥—ä»¶ (AppCode, CLion, GoLand, IntelliJ IDEA, PhpStorm, PyCharm, RubyMine, WebStorm, Fleet)
        - **è‹¹æœå·¥å…·**: Xcode, TextEdit
        - **ç°ä»£ç¼–è¾‘å™¨**: Cursor, Nova, Zed, neovim
        - **ä¸“ä¸šå·¥å…·**: Typora (Markdown), MacVim

        ### ğŸŒ **9 è¯­è¨€å›½é™…åŒ–æ”¯æŒ**
        - è‡ªåŠ¨ (è·Ÿéšç³»ç»Ÿ), English, ç®€ä½“ä¸­æ–‡, Deutsch, EspaÃ±ol, FranÃ§ais, Italiano, í•œêµ­ì–´, Ğ ÑƒÑÑĞºĞ¸Ğ¹, TÃ¼rkÃ§e

        ### âš¡ **ç”Ÿäº§åŠ›å¢å¼º**
        - **å…¨å±€å¿«æ·é”®**ï¼šå¯è‡ªå®šä¹‰é”®ç›˜å¿«æ·é”®ï¼Œä¸€é”®å¯åŠ¨
        - **çŠ¶æ€æ é›†æˆ**ï¼šèœå•æ å¿«é€Ÿè®¿é—®ï¼Œè‡ªå®šä¹‰è¡Œä¸º
        - **è·¯å¾„å¤åˆ¶**ï¼šä¸€é”®å¤åˆ¶æ–‡ä»¶/æ–‡ä»¶å¤¹è·¯å¾„ï¼Œæ”¯æŒè½¬ä¹‰é€‰é¡¹
        - **è‡ªå®šä¹‰åº”ç”¨**ï¼šæ·»åŠ å’Œé…ç½®è‡ªå®šä¹‰åº”ç”¨ç¨‹åº
        - **å¿«é€Ÿåˆ‡æ¢**ï¼šå•å‡»åˆ‡æ¢æ“ä½œï¼Œæå‡ä½¿ç”¨æ•ˆç‡

        ## ğŸ› ï¸ æŠ€æœ¯åˆ›æ–°äº®ç‚¹

        ### ğŸ”§ **æœ¬åœ°ä¼˜å…ˆæ¶æ„**
        ```swift
        // å½»åº•å‘Šåˆ«ç½‘ç»œä¾èµ–
        repositoryURL = "file://./LocalDependencies/ShortcutRecorder"
        // æ„å»ºé€Ÿåº¦æå‡ 50-70%ï¼Œå®Œå…¨ç¦»çº¿æ„å»º
        ```

        ### ğŸ—ï¸ **ç»Ÿä¸€å¯åŠ¨ç®¡ç†ç³»ç»Ÿ**
        ```swift
        // å–ä»£æœ‰é—®é¢˜çš„è¾…åŠ©åº”ç”¨
        UnifiedLaunchManager.ensureSingleInstance()
        // ç°ä»£åŒ–å¯åŠ¨ç®¡ç†ï¼Œå®Œå–„ç”Ÿå‘½å‘¨æœŸ
        ```

        ### ğŸ›¡ï¸ **å…¨é¢é”™è¯¯å¤„ç†**
        - ç»Ÿä¸€é”™è¯¯ç®¡ç†ï¼Œæ‰€æœ‰ç»„ä»¶è¦†ç›–
        - ä¼˜é›…é™çº§æœºåˆ¶ï¼Œè¯¦ç»†æ—¥å¿—åé¦ˆ
        - ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º

        ## ğŸ“Š æ€§èƒ½å¯¹æ¯”

        | ç‰¹æ€§ | OpenInTerminal åŸç‰ˆ | QuickLauncher v1.0.0 |
        |------|-------------------|---------------------|
        **åº”ç”¨ä½“ç§¯** | 32MB | **22MB** (-30%) |
        **æ„å»ºé€Ÿåº¦** | ç½‘ç»œä¾èµ–ï¼Œæ…¢ | **æœ¬åœ°ä¾èµ–ï¼Œå¿« 50-70%** |
        **åº”ç”¨æ”¯æŒ** | 10+ | **35+** (+250%) |
        **è¯­è¨€æ”¯æŒ** | 1 ç§ | **9 ç§** (+800%) |
        **æ¶æ„** | è¾…åŠ©åº”ç”¨ | **ç»Ÿä¸€å¯åŠ¨ç®¡ç†** |
        **æ–‡æ¡£** | åŸºç¡€ | **å®Œæ•´æ–‡æ¡£ç³»ç»Ÿ** |

        ## ğŸ—ï¸ æ¶æ„æ”¯æŒè¯´æ˜

        æœ¬ç‰ˆæœ¬æ”¯æŒå¤šæ¶æ„ï¼Œè¯·æ ¹æ®ä½ çš„ Mac èŠ¯ç‰‡é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬ï¼š

        | æ¶æ„ç‰ˆæœ¬ | æ”¯æŒç³»ç»Ÿ | é€‚ç”¨è®¾å¤‡ | ä¸‹è½½æ–‡ä»¶ |
        |---------|---------|---------|---------|
        **Intel (x86_64)** | macOS 10.13+ | Intel èŠ¯ç‰‡ Mac | `QuickLauncher-Intel.dmg/zip` |
        **Apple Silicon (ARM64)** | macOS 11.0+ | M123 èŠ¯ç‰‡ Mac | `QuickLauncher-ARM64.dmg/zip` |

        ## ğŸ”§ å®‰è£…æ–¹æ³•

        ### ğŸ“¦ **æ–¹æ³• 1: DMG å®‰è£…åŒ… (æ¨è)**
        1. æ ¹æ®èŠ¯ç‰‡é€‰æ‹©ç‰ˆæœ¬ï¼š`QuickLauncher-Intel.dmg` æˆ– `QuickLauncher-ARM64.dmg`
        2. åŒå‡»æŒ‚è½½ï¼Œæ‹–æ‹½åº”ç”¨åˆ° Applications æ–‡ä»¶å¤¹
        3. é¦–æ¬¡è¿è¡Œå¯èƒ½éœ€è¦å…è®¸è¿è¡Œ

        ### ğŸ“ **æ–¹æ³• 2: ZIP å‹ç¼©åŒ…**
        1. é€‰æ‹©å¯¹åº”æ¶æ„ç‰ˆæœ¬ï¼š`QuickLauncher-Intel.zip` æˆ– `QuickLauncher-ARM64.zip`
        2. è§£å‹åå°† `QuickLauncher.app` å¤åˆ¶åˆ° Applications æ–‡ä»¶å¤¹

        ## ğŸ” æƒé™é…ç½®

        **å¿…éœ€æƒé™ï¼š**
        - **Apple Events æƒé™**ï¼šä¸ Finder äº¤äº’ï¼Œè·å–æ–‡ä»¶è·¯å¾„
        - **è¾…åŠ©åŠŸèƒ½æƒé™**ï¼šç›‘å¬å¿«æ·é”®å’Œç³»ç»Ÿäº‹ä»¶ï¼ˆå¦‚éœ€è¦ï¼‰

        **è®¾ç½®æ–¹æ³•ï¼š**
        1. æ‰“å¼€ **ç³»ç»Ÿè®¾ç½® > éšç§ä¸å®‰å…¨æ€§**
        2. ç‚¹å‡» **è¾…åŠ©åŠŸèƒ½** æˆ– **è‡ªåŠ¨åŒ–**
        3. æ·»åŠ  QuickLauncher å¹¶å‹¾é€‰å…è®¸
        4. é‡å¯åº”ç”¨ä½¿æƒé™ç”Ÿæ•ˆ

        ## ğŸ® ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

        ### ğŸ“‚ **å¼€å‘è€…å·¥ä½œæµ**
        1. åœ¨ Finder ä¸­æ‰¾åˆ°é¡¹ç›®æ–‡ä»¶å¤¹
        2. å³é”®é€‰æ‹© "Open in Terminal" â†’ ç›´æ¥åœ¨é¡¹ç›®è·¯å¾„æ‰“å¼€ç»ˆç«¯
        3. å³é”®é€‰æ‹© "Open in VS Code" â†’ ç›´æ¥åœ¨ VS Code ä¸­æ‰“å¼€é¡¹ç›®
        4. ä½¿ç”¨å¿«æ·é”® `âŒ˜+â‡§+Q` å¿«é€Ÿè®¿é—® QuickLauncher ä¸»ç•Œé¢

        ### ğŸš€ **è®¾è®¡å¸ˆå·¥ä½œæµ**
        1. å³é”®è®¾è®¡æ–‡ä»¶ â†’ "Open in Photoshop" ç›´æ¥ç¼–è¾‘
        2. å¤åˆ¶æ–‡ä»¶è·¯å¾„ â†’ å¿«é€Ÿåˆ†äº«ç»™å›¢é˜Ÿæˆå‘˜
        3. çŠ¶æ€æ å¿«é€Ÿè®¿é—® â†’ å¯åŠ¨å¸¸ç”¨è®¾è®¡å·¥å…·

        ## âŒ¨ï¸ é»˜è®¤å¿«æ·é”®

        | å¿«æ·é”® | åŠŸèƒ½ |
        |--------|------|
        `âŒ˜ + â‡§ + Q` | æ‰“å¼€ QuickLauncher ä¸»ç•Œé¢ |
        `âŒ˜ + â‡§ + C` | å¤åˆ¶å½“å‰æ–‡ä»¶è·¯å¾„ |
        `âŒ˜ + â‡§ + R` | åˆ·æ–°åº”ç”¨åˆ—è¡¨ |

        ## ğŸ¯ ç‰ˆæœ¬é‡Œç¨‹ç¢‘

        **v1.0.0 æ ‡å¿—ç€ QuickLauncher ä»å®éªŒé¡¹ç›®å‘ä¸“ä¸šç”Ÿäº§åŠ›å·¥å…·çš„å®Œå…¨è½¬å˜ï¼š**

        ### âœ… **æŠ€æœ¯æˆç†Ÿåº¦**
        - ç”Ÿäº§å°±ç»ªçš„æ¶æ„ï¼Œå…¨é¢é”™è¯¯å¤„ç†
        - ä¸“ä¸šæ„å»ºç³»ç»Ÿï¼ŒCI/CD è‡ªåŠ¨åŒ–
        - å®Œæ•´æ–‡æ¡£å’Œå¼€å‘è€…èµ„æº

        ### ğŸ¨ **ç”¨æˆ·ä½“éªŒ**
        - æ˜¾è‘—æ€§èƒ½æ”¹è¿›ï¼ˆä½“ç§¯å° 30%ï¼Œæ„å»ºå¿« 50-70%ï¼‰
        - æ‰©å±•åº”ç”¨æ”¯æŒï¼ˆ35+ vs åŸç‰ˆ 10+ï¼‰
        - å¤šè¯­è¨€æ”¯æŒå’Œè‡ªå®šä¹‰é…ç½®

        ### ğŸ›ï¸ **é¡¹ç›®æ²»ç†**
        - å»ºç«‹è´¡çŒ®æŒ‡å—å’Œå®‰å…¨ç­–ç•¥
        - ä¸“ä¸šæ–‡æ¡£ç»“æ„
        - ç¤¾åŒºå¯¼å‘å¼€å‘æ–¹æ³•

        ## ğŸ”— ç›¸å…³é“¾æ¥

        - ğŸ“– [ä½¿ç”¨æ–‡æ¡£](https://github.com/tekintian/QuickLauncher/blob/main/README.md)
        - ğŸš€ [å¿«é€Ÿå¼€å§‹](https://github.com/tekintian/QuickLauncher/blob/main/QUICK_START.md)
        - ğŸ› ï¸ [æ„å»ºè¯´æ˜](https://github.com/tekintian/QuickLauncher/blob/main/docs/BUILD_INSTRUCTIONS.md)
        - ğŸ› [é—®é¢˜åé¦ˆ](https://github.com/tekintian/QuickLauncher/issues)
        - ğŸ¤ [è´¡çŒ®æŒ‡å—](https://github.com/tekintian/QuickLauncher/blob/main/CONTRIBUTING.md)

        ## ğŸ“ˆ æ–‡ä»¶æ ¡éªŒ

        **éªŒè¯ä¸‹è½½æ–‡ä»¶å®Œæ•´æ€§ï¼š**
        ```bash
        # Intel ç‰ˆæœ¬
        shasum -a 256 -c QuickLauncher-Intel.dmg.sha256
        
        # ARM64 ç‰ˆæœ¬  
        shasum -a 256 -c QuickLauncher-ARM64.dmg.sha256
        ```

        ---

        **ğŸŒŸ å¦‚æœ QuickLauncher å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·è€ƒè™‘ç»™é¡¹ç›®ä¸€ä¸ª Starï¼**
        EOF
        
    - name: Release
      uses: softprops/action-gh-release@v1
      with:
        files: |
          QuickLauncher-Intel.dmg
          QuickLauncher-Intel.dmg.sha256
          QuickLauncher-ARM64.dmg
          QuickLauncher-ARM64.dmg.sha256
          QuickLauncher-Intel.zip
          QuickLauncher-Intel.zip.sha256
          QuickLauncher-ARM64.zip
          QuickLauncher-ARM64.zip.sha256
        body_path: release_notes.md
        draft: false
        prerelease: false
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}